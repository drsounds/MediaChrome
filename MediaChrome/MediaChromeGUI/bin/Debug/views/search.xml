<?
/*****
 * Home view for Segurify
 */
 var result = findMusic(parameter);

 
 /*  */
?>
<view>
	<section name="Overview" list="true" >
		<columnheader noelm="true" name=" " size="20" />

		<columnheader noelm="true" name="Title" size="320" />
		<columnheader noelm="true" name="Artist" size="320" />
		<columnheader noelm="true" name="Album" size="320" />
		<space height="10"/>
		 <label height="50" size="14" left="10" top="@TOP" width="500">Search results for '@{parameter}'</label>
		
		<!--<label height="50" color="#aaeeaa" left="10" top="@TOP" width="500">Did you mean</label> -->
		

<? 
/** Get local songs */
var local_content = queryLocalFiles("SELECT * FROM song WHERE artist LIKE '%"+parameter+"%' OR album LIKE '%"+parameter+"%' OR name LIKE '%"+parameter+"%'");

for(var i=0; i < local_content.Count; i++){ var local_song=local_content[i];
?> 
	<entry left="0" width="-1" top="@TOP" height="18" title="@{local_song.Title}"   artist="@{local_song.Artist}" album="@{local_song.Album.Name}" uri="@{local_song.Path}"/>
<?
}

for(var i=0; i < result.Count; i++){
var Title = result[i].Name;
var Artist = result[i].Artist;
var Album = result[i].Album;
	var uri = result[i].Link;
?>

		<entry dragUri="@{uri}" left="0" width="-1" top="@TOP" height="18"  href_artist="@{artist_uri}" href_album="@{album_uri}" uri="@{uri}">
			<title noelm="true"><![CDATA[@{Title}]]></title>
			<artist noelm="true"><![CDATA[@{Artist}]]></artist>
			<album noelm="true"><![CDATA[@{Album.Name}]]></album>
		</entry>
<? } ?>
	</section>
</view>